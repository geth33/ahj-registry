{% extends "admin/base_site.html" %}

{% block content %}
<form action="" method="post">
  {% csrf_token %}
  <p>
    API Tokens will be generated for the following users:
  </p>
    <ul>
      {% for user in users_without_tokens %}
      <li>
        <a href="{{ user.pk }}/" target="_blank">{{ user.Email }}</a>
        <input type="hidden" name="_selected_action" value="{{ user.pk }}">
      </li>
      {% endfor %}
    </ul>
  {% if users_with_tokens.count > 0 %}
  <p>
    API Tokens will <b>NOT</b> be generated for the following users because they already have API tokens:
  </p>
    <ul>
      {% for user in users_with_tokens %}
      <li>
        <a href="../apitoken/{{ user.api_token }}/" target="_blank">{{ user.Email }}</a>
      </li>
      {% endfor %}
    </ul>
  {% endif %}
  <input type="hidden" name="action" value="user_generate_api_token" />
  <p style="padding-top: 1em; text-align: center">
  <span style="padding-right: 2em">
    <a href="{{ request.get_full_path }}">
      <input type="button" name="Cancel" value="Cancel">
    </a>
  </span>
    <span>
    <input type="submit" name="apply" value="Confirm"/>
  </span>
  </p>
</form>
{% endblock %}
