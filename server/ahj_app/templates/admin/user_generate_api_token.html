{% extends "admin/base_site.html" %}

{% block content %}
<form action="" method="post">
  {% csrf_token %}
  <p>
    API Tokens will be generated for the following users:
  </p>
    <ul>
      {% for user in users_without_tokens %}
      <li>
        <a href="{{ user.pk }}/" target="_blank">{{ user.Email }}</a>
        <input type="hidden" name="_selected_action" value="{{ user.pk }}">
      </li>
      {% endfor %}
    </ul>
  <p>
    API Tokens will <b>NOT</b> be generated for the following users because they already have API tokens:
  </p>
  <ul>
    {% for tuple in user_token_tuples %}
    <li>
      <a href="../apitoken/{{ tuple.1 }}/" target="_blank">{{ tuple.0.Email }}</a>
    </li>
    {% endfor %}
  </ul>
  <input type="hidden" name="action" value="user_generate_api_token" />
  <p style="padding-top: 1em; text-align: center">
  <span style="padding-right: 2em">
    <a href="{{ request.get_full_path }}">
      <input type="button" name="Cancel" value="Cancel">
    </a>
  </span>
    <span>
    <input type="submit" name="apply" value="Confirm"/>
  </span>
  </p>
</form>
{% endblock %}
